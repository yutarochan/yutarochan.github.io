<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta name="apple-mobile-web-app-capable" content="yes"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <title> A Web-Based FaceRig + Live2D Implementation | Amaranth&#39;s Anomaly </title> <meta name="description" content=" Web Version of FaceRig + Live2D "> <meta name="keywords" content="web, facerig, live2d, facial recognition"> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <!-- Social: Facebook / Open Graph --> <meta property="og:type" content="article"> <meta property="article:author" content="Yuya Ong"> <meta property="article:section" content=""> <meta property="article:tag" content="web, facerig, live2d, facial recognition"> <meta property="article:published_time" content="2016-03-07 16:00:01 -0800"> <meta property="og:url" content="http://localhost:4000/2016/facerig-live2d/"> <meta property="og:title" content=" A Web-Based FaceRig + Live2D Implementation | Amaranth&#39;s Anomaly "> <meta property="og:image" content="http://localhost:4000"> <meta property="og:description" content=" Web Version of FaceRig + Live2D "> <meta property="og:site_name" content="Yuya Ong"> <meta property="og:locale" content="en_US"> <!-- Social: Twitter --> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:site" content="@yutarochan"> <meta name="twitter:title" content=" A Web-Based FaceRig + Live2D Implementation | Amaranth&#39;s Anomaly "> <meta name="twitter:description" content=" Web Version of FaceRig + Live2D "> <meta name="twitter:image:src" content="http://localhost:4000"> <!-- Social: Google+ / Schema.org --> <meta itemprop="name" content=" A Web-Based FaceRig + Live2D Implementation | Amaranth&#39;s Anomaly "> <meta itemprop="description" content=" Web Version of FaceRig + Live2D "> <meta itemprop="image" content="http://localhost:4000"> <!-- rel prev and next --> <link rel="stylesheet" href="/assets/css/main.css"> <link rel="stylesheet" href="/assets/css/font-awesome.min.css"> <link href="https://fonts.googleapis.com/css?family=IBM+Plex+Mono|IBM+Plex+Sans" rel="stylesheet"> <!-- Canonical link tag --> <link rel="canonical" href="http://localhost:4000/2016/facerig-live2d/"> <link rel="alternate" type="application/rss+xml" title="Amaranth's Anomaly " href="http://localhost:4000/feed.xml"> <script type="text/javascript"> var disqus_shortname = 'yutarochan'; var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-74785105-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script> </head> <body> <main class="wrapper"> <header class="site-header"> <style>.inverse { background: black; color: #fff; }</style> <nav class="nav"> <div class="container"> <h1 class="logo"><a href="/">Amaranth's <span class='inverse'> Anomaly </span></a></h1> <ul class="navbar"> <li><a href="/about">About</a></li> <li><a href="/feed.xml" target="_blank">RSS</a></li> </ul> </div> </nav> </header> <article class="post container" itemscope itemtype="http://schema.org/BlogPosting"> <header class="post-header"> <p class="post-meta"><time datetime="2016-03-07T16:00:01-08:00" itemprop="datePublished">Mar 7, 2016</time></p> <h1 class="post-title" itemprop="name headline">A Web-Based FaceRig + Live2D Implementation</h1> </header> <div class="post-content" itemprop="articleBody"> <p>The following blog post was based on an original post I wrote for <a href="http://qiita.com/yutarochan/items/6f08bfa7b20709a6b3ba">Qiita</a> and was translated from Japanese. Also, due to TOS reasons with the Live2D SDK, I cannot post the source code to this implementation.</p> <hr /> <p>With the recent hype surrounding <a href="https://facerig.com/">FaceRig</a> and the release of their <a href="http://www.live2d.com/en/">Live2D</a> module, it was certainly interesting to see two really interesting pieces of technology merge into one neat application for use in areas like gaming and new human-computer interaction systems.</p> <iframe width="480" height="270" src="https://www.youtube.com/embed/IINyowbMqJI" frameborder="0" allowfullscreen=""></iframe> <p>With that, I wanted to take this an opportunity to hack together a quick-and-dirty web-based implementation of FaceRig’s Live2D module for a web browser. Of course further refinements to improve the tracking ability or the fluidity of the animation in the future.</p> <p>In the past, I have implemented a demo of Live2D on a browser based on OpenGL. For this implementation, I have utilized the same Live2D demo codebase and will simply look through the SDK to be able to adjust the parameters to deform the angular direction of the character’s face.</p> <p><img src="https://qiita-image-store.s3.amazonaws.com/0/64623/4d5fed48-372d-c3b9-0a3f-ddbd5c633e93.png" alt="Implementation of the Web Version of Live2D" /></p> <p>For facial tracking, I implemented a <a href="https://github.com/auduno/clmtrackr">Javascript based facial tracker</a> based on the <a href="http://dl.acm.org/citation.cfm?id=1938021">Constrained Local Models</a> from Saragih et. al’s paper. This works fairly well for a prototype (although not really perfect), however can probably truly optimized with either a better model or a completely new tracking algorithm (such as implementing a Lucas-Kanade Optical Flow based tracker in Javascript). But for now, this would suffice to at least get some of the primary functions of facial feature tracking down.</p> <p>Below you can see the facial feature tracking algorithm in action:</p> <p><img src="https://qiita-image-store.s3.amazonaws.com/0/64623/c37157ae-f985-0b30-3cdc-87a4f05e49ed.png" alt="Facial Feature Tracking Demo 1" /></p> <p><img src="https://qiita-image-store.s3.amazonaws.com/0/64623/f93cbf6a-e568-da2d-93cc-526ac90290c0.png" alt="Hey look mom, I'm Iron Man!" /></p> <p>The original source for the OpenGL based Live2D implemented a mouse based tracker which would use the mouse pointer’s coordinates as a means to rotate and morph the face to the corresponding angle of where the pointer is. The plan here is to map the facial feature tracking coordinates to the mouse pointer and attempt to move the character’s face.</p> <p>For a very naive approach, we can use the nose as a key point to have it track only the rotation of the head for our initial implementation. Further down the road we can utilize these parameters to further optimize the tracking of the facial features.</p> <p>We will use the coordinate point number 62 as our tracking point for the facial tracking.</p> <p><img src="https://qiita-image-store.s3.amazonaws.com/0/64623/de76edbf-2b1c-fed4-8581-b7bf53667fe3.png" alt="Facial Coordinates" /></p> <p>Using the above method, I was able to make the head rotate slightly - but not fluidly enough like the original implementation as the magnitude of movement is very small. To fix this, we may have to normalize the values so that the movement of our face would be greater for the corresponding head movements captured from the camera.</p> <p>For now, this was a quick-and-dirty implementation of FaceRig Live2D module. However, down the road we can maybe use a better tracking algorithm to track certain features of the face with greater accuracy (using deep learning models maybe). Furthermore, we can dig into the Live2D SDK to see how we can morph some of the facial features to get a better control over the visual aspects of the avatar.</p> <p><img src="https://qiita-image-store.s3.amazonaws.com/0/64623/db700e2f-cacf-471a-bd4a-f7231af98e9a.png" alt="The Final Product" /></p> <aside class="share"> <p>If you liked this article and think others should read it, please <a href="http://twitter.com/share?text=A Web-Based FaceRig + Live2D Implementation&amp;url=http://localhost:4000/2016/facerig-live2d/&amp;via=yutarochan" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">share it on Twitter <i class="fa fa-twitter" aria-hidden="true" style="color:#00aced"></i></a> or <a href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/2016/facerig-live2d/" onclick="window.open(this.href, 'facebook-share', 'width=550,height=235');return false;">Facebook <i class="fa fa-facebook-square" aria-hidden="true" style="color:#3b5998"></i></a>.</p> </aside> </div> </article> <aside id="comments" class="disqus"> <div class="container"> <h3><i class="icon icon-comments-o"></i> Comments</h3> <div id="disqus_thread"></div> <script type="text/javascript"> var disqus_shortname = 'yutarochan'; var disqus_identifier = '/2016/facerig-live2d'; var disqus_title = 'A Web-Based FaceRig + Live2D Implementation'; var disqus_url = 'http://localhost:4000'; /*var disqus_developer = 1;*/ (function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); </script> <noscript> Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a> </noscript> </div> </aside> <footer class="site-footer"> <div class="container"> <small class="block">&lt;/&gt; <a href="http://github.com/heiswayi/thinkspace" title="a minimalist Jekyll theme for technical writing">Thinkspace theme</a> by <a href="http://heiswayi.github.io">Heiswayi Nrird</a>. | <i class="fa fa-copyright"></i> 2018 Yuya Ong</small> </div> </footer> </main> </body> </html>
